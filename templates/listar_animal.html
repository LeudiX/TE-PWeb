{% extends 'base.html' %}
{% load static %}

{% block content %}

<!-- Fondo general en azul claro -->
<div class="min-h-screen bg-blue-50 py-8 px-4">

  <div class="max-w-7xl mx-auto">
    <h1 class="text-3xl font-bold text-blue-900 mb-6 text-center">Listado de Animales</h1>

    <!-- Filtros -->
    <form method="get" class="mb-6 flex flex-wrap gap-4 justify-center items-center">
      <input type="text" name="buscar" placeholder="Buscar por nombre o especie"
             class="w-full sm:w-64 px-4 py-2 border border-blue-300 rounded-md focus:ring-blue-500 focus:border-blue-500 bg-white"
             value="{{ request.GET.buscar }}">
      
      <select name="disponible" class="w-full sm:w-48 px-4 py-2 border border-blue-300 rounded-md focus:ring-blue-500 focus:border-blue-500 bg-white">
        <option value="">-- Disponibilidad --</option>
        <option value="1" {% if request.GET.disponible == '1' %}selected{% endif %}>Disponible</option>
        <option value="0" {% if request.GET.disponible == '0' %}selected{% endif %}>No disponible</option>
      </select>

      <button type="submit"
        class="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
  <i class="fas fa-filter"></i> Filtrar
    </button>
      <a href="{% url 'listar_animal' %}"
   class="flex items-center gap-2 px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400 transition">
  <i class="fas fa-eraser"></i> Limpiar filtros
    </a>
    </form>
    <div class="flex justify-between items-center mb-10">
     <a href="{% url 'insertar_animal' %}"
     class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition duration-200 ease-in-out transform hover:scale-105">
    <i class="fas fa-plus-circle"></i> Insertar Animal
     </a>
    </div>
    <!-- Tabla -->
    <div class="overflow-x-auto">
      <table class="min-w-full bg-white border border-blue-200 shadow-md rounded-lg overflow-hidden">
        <thead class="bg-blue-600 text-white">
         <tr>
             <th class="px-6 py-3 text-sm font-semibold text-left">Nombre</th>
             <th class="px-6 py-3 text-sm font-semibold text-left">Especie</th>
             <th class="px-6 py-3 text-sm font-semibold text-left">Edad</th>
             <th class="px-6 py-3 text-sm font-semibold text-left">Sexo</th>
             <th class="px-6 py-3 text-sm font-semibold text-left">Adopción</th>
            <th class="px-6 py-3 text-sm font-semibold text-center"></th>
            <th class="px-6 py-3 text-sm font-semibold text-center"></th>
    </th>
        </tr>
        </thead>
        <tbody class="divide-y divide-blue-100">
          {% for i in animal %}
          <tr class="hover:bg-blue-100 transition duration-150">
            <td class="px-6 py-4 text-sm text-blue-900">{{ i.nombre }}</td>
            <td class="px-6 py-4 text-sm text-blue-900">{{ i.especie }}</td>
            <td class="px-6 py-4 text-sm text-blue-900">{{ i.edad }}</td>
            <td class="px-6 py-4 text-sm text-blue-900">{{ i.sexo }}</td>
            <td class="px-6 py-4 text-sm">
              {% if i.disponibleAdopcion %}
                <span class="inline-block px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">Disponible</span>
              {% else %}
                <span class="inline-block px-2 py-1 bg-gray-200 text-gray-700 rounded-full text-xs">No disponible</span>
              {% endif %}
            </td>
            <td class="px-6 py-4 text-center">
        <a href="{% url 'editar_animal' i.pk %}"
     class="inline-flex items-center gap-2 px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition duration-200 ease-in-out transform hover:scale-105">
    <i class="fas fa-edit"></i> </a>
    </td>
    <td class="px-6 py-4 text-center">
        <a href="{% url 'eliminar_animal' i.pk %}"
     class="inline-flex items-center gap-2 px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition duration-200 ease-in-out transform hover:scale-105">
    <i class="fas fa-trash-alt"></i> </a>
    </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7" class="px-6 py-4 text-center text-gray-500">No se encontraron animales.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <!-- Paginación -->
<div class="mt-6 flex justify-center items-center space-x-2">
  {% if animal.has_previous %}
    <a href="?page=1{% if request.GET.buscar %}&buscar={{ request.GET.buscar }}{% endif %}{% if request.GET.disponible %}&disponible={{ request.GET.disponible }}{% endif %}"
       class="px-3 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200">Primera</a>

    <a href="?page={{ animal.previous_page_number }}{% if request.GET.buscar %}&buscar={{ request.GET.buscar }}{% endif %}{% if request.GET.disponible %}&disponible={{ request.GET.disponible }}{% endif %}"
       class="px-3 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200">Anterior</a>
  {% endif %}

  <span class="px-3 py-1 bg-blue-600 text-white rounded">Página {{ animal.number }} de {{ animal.paginator.num_pages }}</span>

  {% if animal.has_next %}
    <a href="?page={{ animal.next_page_number }}{% if request.GET.buscar %}&buscar={{ request.GET.buscar }}{% endif %}{% if request.GET.disponible %}&disponible={{ request.GET.disponible }}{% endif %}"
       class="px-3 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200">Siguiente</a>

    <a href="?page={{ animal.paginator.num_pages }}{% if request.GET.buscar %}&buscar={{ request.GET.buscar }}{% endif %}{% if request.GET.disponible %}&disponible={{ request.GET.disponible }}{% endif %}"
       class="px-3 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200">Última</a>
  {% endif %}
</div>
    </div>
  </div>
</div>

{% endblock %}
